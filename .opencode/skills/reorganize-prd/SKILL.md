# 重构产品需求文档

将 packages/product-designs 中的 PRD 按业务功能模块重新组织，生成 apps/docs/product/ 下的结构化文档。

## 何时使用

当需要：
- 按业务模块查看所有相关需求（而非按时间）
- 为 apps/docs 生成产品文档
- 新增 PRD 后重新整理文档结构

## 前置条件

- packages/product-designs 目录存在
- apps/docs 目录存在
- 有写入 apps/docs/product/ 的权限

## 执行步骤

### 步骤 1：扫描所有 PRD 文件

```bash
# 查找所有 PRD 文件
find packages/product-designs -name "prd.md" -type f
```

### 步骤 2：解析 PRD 内容

每个 PRD 包含以下信息：
- 文档元数据（版本、作者、日期、状态）
- 背景与目标
- 功能需求列表
- 交互逻辑
- 验收标准

### 步骤 3：按模块分类

根据 PRD 内容关键词自动分类：

**项目管理模块关键词**：
- 项目描述、项目状态、项目类型、项目弹窗、项目详情
- ProjectModal、ProjectDrawer、slow-burn、sprint-project
- 项目管理、项目字段

**用户认证模块关键词**：
- 用户注册、用户登录、数据持久化、用户-项目关联
- 密码哈希、bcrypt、真实数据库

**导航架构模块关键词**：
- 导航架构、侧边栏、Tab、项目详情页、路由
- 一级导航、二级导航、面包屑

**UI/设计模块关键词**：
- UI 设计规范、色彩系统、字体系统、组件规范
- 品牌视觉、Logo、Glassmorphism、玻璃态
- 动效规范、间距系统

**积分奖励模块关键词**：
- 积分计算、积分基数、徽章、等级、奖励
- 自动计算、积分值

### 步骤 4：生成模块文档

为每个模块生成标准格式的 Markdown 文档：

```markdown
# {模块名称}

## 模块概述

概述该模块的核心功能和目标。

## 相关需求

按时间倒序列出相关的 PRD。

## 功能清单

合并所有相关 PRD 的功能点，去重并整理。

## 实现状态

| 功能 | 来源 PRD | 实现状态 |
|------|----------|----------|
| ... | ... | ... |

## 历史变更

按时间顺序记录该模块的需求变更。
```

### 步骤 5：更新目录索引

生成 `apps/docs/product/index.md` 作为总览页面。

## 当前 PRD 映射关系

基于现有 9 个 PRD 文件：

| PRD 文件 | 主要模块 | 次要模块 |
|----------|----------|----------|
| 项目管理增强-20260201 | 项目管理 | - |
| 用户与项目数据持久化-20260204 | 用户认证 | 项目管理 |
| 导航架构调整-20260202 | 导航架构 | 项目管理 |
| 项目弹窗优化-20260211 | 项目管理 | 积分奖励、UI设计 |
| slow-burn项目优化-20260216 | 项目管理 | UI设计 |
| UI设计规范-20260219 | UI设计 | - |
| 品牌视觉系统升级-20260219 | UI设计 | - |

## 输出示例

生成的文档结构示例：

```
apps/docs/product/
├── index.md                    # 产品文档首页
├── 00-index.md                 # 模块索引
├── 01-project/                 # 项目管理
│   ├── index.md
│   └── module.md
├── 02-auth/                    # 用户认证
│   ├── index.md
│   └── module.md
├── 03-navigation/              # 导航架构
│   ├── index.md
│   └── module.md
├── 04-task/                    # 任务管理
│   ├── index.md
│   └── module.md
├── 05-requirement/             # 需求管理
│   ├── index.md
│   └── module.md
├── 06-defect/                  # 缺陷管理
│   ├── index.md
│   └── module.md
├── 07-rewards/                 # 积分奖励
│   ├── index.md
│   └── module.md
└── 08-design/                  # 设计系统
    ├── index.md
    └── module.md
```

## 注意事项

1. **保留历史信息**：每个功能点需标注来源 PRD 和日期
2. **冲突处理**：若多个 PRD 对同一功能有不同定义，以最新 PRD 为准，并标注历史变更
3. **增量更新**：重新生成时保留已有的实现状态标记
4. **链接维护**：确保模块间的交叉引用链接有效

## 后续计划

- [ ] 支持增量更新（仅处理新增/变更的 PRD）
- [ ] 自动生成模块依赖关系图
- [ ] 与 Git 集成追踪 PRD 变更历史
- [ ] 支持多语言 i18n 文档生成
