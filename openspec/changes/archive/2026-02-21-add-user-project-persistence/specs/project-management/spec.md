## MODIFIED Requirements

### Requirement: 项目数据持久化
系统 SHALL 使用真实数据库（PostgreSQL）存储项目数据；项目与用户关联（如 `userId`）；列表与详情仅返回当前用户的项目，创建/更新/删除仅允许操作当前用户的项目；服务器重启后数据不丢失。

#### Scenario: 创建项目持久化
- **WHEN** 当前用户创建新项目
- **THEN** 项目数据保存到 PostgreSQL
- **AND** 项目关联当前用户（如写入 `userId`）
- **AND** 刷新页面后项目仍然存在

#### Scenario: 更新项目持久化
- **WHEN** 当前用户更新本人项目信息
- **THEN** 更新后的数据保存到 PostgreSQL
- **AND** 刷新页面后更新仍然生效

#### Scenario: 删除项目持久化
- **WHEN** 当前用户删除本人项目
- **THEN** 项目从 PostgreSQL 中移除
- **AND** 刷新页面后项目不再显示

#### Scenario: 重启后数据保留
- **WHEN** 服务器重启
- **THEN** 项目数据不丢失，仍可从数据库查询

#### Scenario: 未登录访问项目接口
- **WHEN** 未登录用户请求项目列表或详情或创建/更新/删除
- **THEN** 系统返回 401 或重定向到登录页
- **AND** 不返回或修改其他用户的项目数据

#### Scenario: 操作非本人项目
- **WHEN** 已登录用户请求更新或删除不属于自己的项目
- **THEN** 系统返回 403 或 404
- **AND** 不执行该操作

---

## ADDED Requirements

### Requirement: 用户-项目关联
项目实体 SHALL 包含所属用户字段（如 `userId`）；创建项目时 SHALL 写入当前登录用户 ID；列表与详情接口 SHALL 仅返回当前用户的项目；更新与删除接口 SHALL 校验归属，仅允许操作本人的项目。

#### Scenario: 创建时写入当前用户
- **GIVEN** 用户已登录
- **WHEN** 用户创建新项目
- **THEN** 系统将当前用户的 ID 写入项目的 `userId`（或等价）字段
- **AND** 项目归属该用户

#### Scenario: 列表仅返回当前用户项目
- **GIVEN** 用户已登录
- **WHEN** 用户请求项目列表（如 GET /api/projects）
- **THEN** 系统仅返回 `userId` 为当前用户的项目
- **AND** 不返回其他用户的项目

#### Scenario: 详情仅当前用户可访问
- **GIVEN** 用户已登录
- **WHEN** 用户请求某项目详情
- **THEN** 若项目属于当前用户，系统返回该项目
- **AND** 若项目不属于当前用户，系统返回 403 或 404

#### Scenario: 更新与删除校验归属
- **WHEN** 用户请求更新或删除某项目
- **THEN** 系统校验该项目属于当前用户
- **AND** 仅当归属正确时执行更新或删除，否则返回 403 或 404
