# Design: 项目列表卡片滚动、尺寸与截止时间展示

## Context

项目列表页需在容器内滚动、缩小卡片尺寸以提升信息密度，并在卡片上通过颜色与表情区分截止时间状态（已过期、即将截止、未临近），便于用户快速识别紧急与已过期项目。

## Goals / Non-Goals

- **Goals**：卡片区域在容器内滚动；卡片更紧凑、一屏展示更多；截止时间按状态显示红色/黄色/中性及过期表情。
- **Non-Goals**：不改变项目数据模型或 API；不引入新依赖；具体色值与阈值可由实现微调。

## Decisions

### 1. 滚动区域

- **决策**：列表内容区（卡片 grid）在 SectionContainer 的内容区内滚动，整页不随内容撑长。
- **实现**：在 SectionContainer 内对 children 使用 `flex-1 min-h-0 overflow-y-auto`（或由项目页在 SectionContainer 的 children 外包一层带 `overflow-y-auto` 与合适 `max-height`/`flex-1 min-h-0` 的 div），确保只有该区域出现垂直滚动条。
- **备选**：在 SectionContainer 上增加可选 prop（如 `scrollableContent`）控制内容区是否可滚动，避免影响其他使用该组件的页面；若仅项目页需要，则在项目页包一层即可。

### 2. 卡片尺寸

- **决策**：缩小内边距、字号、头像/图标与进度条高度，使单卡更紧凑；必要时可增加 grid 列数或缩小 gap。
- **建议**：内边距由 `p-4` 调整为 `p-3`；标题可由 `text-lg`/默认调小一档；头像/类型图标由 `text-3xl` 调整为 `text-2xl`；进度条 `h-2` 可保留或改为 `h-1.5`；标签与间距适当减小。具体以视觉与可读性为准。

### 3. 截止时间状态与样式

- **状态定义**
  - **已过期**：`endDate < 今天`（按本地日期比较，时间部分可忽略或按 00:00:00 比较）。
  - **即将截止**：未过期且 `endDate` 在 N 天内（建议 N=7，可配置为 3 或 7）。
  - **未临近**：未过期且超过 N 天。

- **颜色与表情**
  - **已过期**：红色系文字（如 Tailwind `text-red-600`，过期越久可用 `text-red-700` 加深）；时间前显示过期相关表情，如 ⏰ 或 🔴（由实现选定一种，保持统一）。
  - **即将截止**：黄色/琥珀色警告（如 `text-amber-600` 或 `text-yellow-600`）；可根据「剩余天数」与「当前进度」加深：例如剩余 1–2 天且进度 &lt; 50% 时使用更深色（如 `text-amber-700`），其余即将截止用较浅色。
  - **未临近**：中性色（如 `text-gray-600` 或与卡片其他次要文字一致）。
  - **无 endDate**：显示「-」或占位，不显示表情，样式与未临近一致。

- **实现**：在 ProjectCard 内根据 `project.endDate` 与当前日期计算状态，渲染时应用对应 className 与表情字符；可抽成 `getDeadlineStatus(endDate: string | null)` 与 `getDeadlineDisplay(status)` 便于复用与测试。

### 4. 日期解析与时区

- **决策**：`endDate` 为日期字符串（如 `YYYY-MM-DD`）时，按本地日期比较即可；若后端返回带时间的 ISO 字符串，则取日期部分再比较，避免时区导致「今天」判断错误。

## Risks / Trade-offs

- **滚动与布局**：若 SectionContainer 被改为全局可滚动，可能影响其他页面；建议仅在项目页对 children 包一层可滚动容器，或通过可选 prop 控制。
- **颜色与无障碍**：红/黄区分需保证对比度满足可访问性；若需进一步区分，可辅以图标或文案（如「已过期」），见 tasks 中 i18n 可选项。

## Open Questions

- 无；阈值（如「即将」7 天）与具体表情可在实现时确定并写入代码注释或本 design。
