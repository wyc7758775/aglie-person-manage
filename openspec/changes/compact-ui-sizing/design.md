## Context
本项目是一个个人敏捷项目管理系统，需要在一个屏幕内展示大量信息（任务、需求、缺陷等）。当前UI采用了较大的元素尺寸，导致：
- 信息密度低，需要频繁滚动
- 在笔记本屏幕上空间利用率不足
- 现代SaaS应用普遍采用更紧凑的设计语言

## Goals
- 统一减少全局UI元素尺寸 15-25%
- 保持视觉层次清晰
- 确保可点击区域仍符合可用性标准（≥44px）
- 提升屏幕信息密度 20-25%

## Non-Goals
- 不改变配色方案
- 不改变布局结构（grid/flex 基础布局）
- 不引入新的组件库
- 不修改字体族

## Component Size Mapping

### 左侧导航 (topnav.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 导航按钮 | w-10 h-10 (40px) | w-8 h-8 (32px) | 保持可点击性 |
| 图标 | w-5 h-5 (20px) | w-4 h-4 (16px) | 导航图标保持 w-5 |
| 间距 | space-y-3 (12px) | space-y-2 (8px) | 更紧凑 |
| Logo容器 | mb-6 (24px) | mb-4 (16px) | 减少顶部间距 |

### SectionContainer (section-container.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 容器内边距 | p-5 (20px) | p-4 (16px) | 整体压缩 |
| 头部下边距 | mb-4 pb-3 | mb-3 pb-2 | 减少标题区高度 |
| 标题文字 | text-xl (20px) | text-lg (18px) | 降低层级 |
| 徽章内边距 | px-2.5 py-0.5 | px-2 py-0.5 | 保持可读性 |
| 添加按钮 | px-4 py-2 | px-3 py-1.5 | 紧凑按钮 |
| 添加按钮图标 | h-3.5 w-3.5 | h-3 w-3 | 配合按钮尺寸 |
| 筛选标签 | px-3 py-1.5 | px-2.5 py-1 | 更紧凑 |

### Breadcrumb导航 (breadcrumb-nav.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 项目选择器 | px-4 py-2 | px-3 py-1.5 | 匹配按钮标准 |
| 下拉菜单内边距 | py-2 | py-1.5 | 减少垂直空间 |
| 菜单项 | px-4 py-2 | px-3 py-1.5 | 紧凑列表项 |
| 返回按钮 | px-3 py-2 | px-2.5 py-1.5 | 保持一致 |

### Tab菜单 (project-tab-menu.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 容器内边距 | p-1.5 (6px) | p-1 (4px) | 更紧凑 |
| Tab按钮 | px-5 py-2 | px-4 py-1.5 | 减少按钮大小 |
| 指示器高度 | h-[calc(100%-12px)] | h-[calc(100%-8px)] | 配合内边距 |

### 项目卡片 (ProjectCard.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 卡片内边距 | p-4 (16px) | p-3 (12px) | 减少整体高度 |
| 项目图标 | w-12 h-12 text-2xl | w-10 h-10 text-xl | 更紧凑 |
| 菜单按钮 | w-5 h-5 | w-4 h-4 | 配合图标标准 |
| 箭头图标 | w-4 h-4 | h-3.5 w-3.5 | 微调 |
| 项目名称高度 | h-[48px] | h-[44px] | 减少两行文字高度 |
| 项目名称文字 | text-lg (18px) | text-base (16px) | 降低层级 |
| 积分标签 | px-3 py-1.5 | px-2.5 py-1 | 紧凑标签 |
| 描述高度 | h-[40px] | h-[36px] | 减少行高 |
| 标签区域 | h-[26px] | h-[24px] | 微调 |
| 进度条间距 | mb-3 | mb-2 | 减少 |
| 日期区域高度 | h-[36px] | h-[32px] | 紧凑 |

### Drawer抽屉 (ProjectDrawer.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 头部内边距 | px-6 py-4 | px-5 py-3 | 减少高度 |
| 标题文字 | text-xl (20px) | text-lg (18px) | 降低层级 |
| 关闭按钮 | text-2xl | text-xl | 匹配标题 |
| 内容区内边距 | p-6 (24px) | p-5 (20px) | 减少间距 |
| 表单间距 | space-y-6 | space-y-5 | 紧凑布局 |
| 底部操作栏 | px-6 py-4 | px-5 py-3 | 减少高度 |

### Dashboard布局 (layout.tsx)
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 左侧留白 | pl-20 (80px) | pl-16 (64px) | 配合导航宽度 |

### 项目列表页面
| 元素 | 当前尺寸 | 调整后 | 备注 |
|------|---------|--------|------|
| 卡片间距 | gap-5 (20px) | gap-4 (16px) | 更多卡片每行 |

## Decisions

### 1. 图标尺寸标准
- **决策**: 默认图标从 h-5/w-5 (20px) 改为 h-4/w-4 (16px)
- **理由**: 16px 是图标的标准尺寸，符合大多数设计系统
- **例外**: 
  - 导航图标保持 w-5 h-5 以保证可识别性
  - 空状态图标保持较大尺寸以增强视觉重心

### 2. 按钮尺寸层级
- **决策**: 统一采用紧凑按钮作为默认
  - 常规按钮: px-3 py-1.5 (12/6px)
  - 小型按钮: px-2.5 py-1 (10/4px)
  - 主要CTA: px-4 py-2 (16/8px) 保持原样
- **理由**: 减少空间占用，同时保持可点击性

### 3. 文字缩放比例
- **决策**: 标题层级统一缩小
  - 页面标题: text-2xl (24px) → text-xl (20px)
  - 区块标题: text-xl (20px) → text-lg (18px)
  - 卡片标题: text-lg (18px) → text-base (16px)
  - 正文: text-sm (14px) 保持
  - 辅助文字: text-xs (12px) 保持
- **理由**: 建立更紧凑的视觉层级

### 4. 间距系统
- **决策**: 默认间距从 1rem (16px) 基准调整为 0.75rem (12px)
- **映射表**:
  | 当前 | 调整后 | 尺寸变化 |
  |------|--------|----------|
  | gap-6 (24px) | gap-4 (16px) | -33% |
  | gap-4 (16px) | gap-3 (12px) | -25% |
  | gap-3 (12px) | gap-2 (8px) | -33% |
  | p-6 (24px) | p-4 (16px) | -33% |
  | p-5 (20px) | p-4 (16px) | -20% |
  | p-4 (16px) | p-3 (12px) | -25% |

### 5. 标题容器高度
- **决策**: 减少标题区域垂直内边距和间距
- **SectionContainer头部**: mb-4 pb-3 → mb-3 pb-2
- **效果**: 减少约 16px 高度

### 6. 表单间距优化
- **决策**: 抽屉和表单区域减少间距
- **space-y-6 (24px) → space-y-5 (20px)**
- **效果**: 表单更紧凑，减少滚动需求

## Implementation Strategy

### 阶段1: 核心组件
1. 修改 SectionContainer - 影响所有页面
2. 修改 topnav.tsx - 影响全局导航
3. 修改 dashboard/layout.tsx - 调整布局留白

### 阶段2: 页面级组件
1. ProjectCard - 项目卡片紧凑化
2. ProjectDrawer - 抽屉表单紧凑化
3. BreadcrumbNav - 面包屑紧凑化
4. ProjectTabMenu - Tab菜单紧凑化

### 阶段3: 其他页面
1. 各列表页面标题区
2. 设置页面表单
3. 其他详情页

## Risks / Trade-offs

### 可访问性
- **风险**: 减小尺寸可能影响视力不佳用户
- **缓解**: 
  - 保持最小点击区域 36px
  - 文字仍可浏览器缩放
  - 保持足够的对比度

### 一致性
- **风险**: 手动修改多处可能导致遗漏
- **缓解**: 
  - 按组件逐个修改
  - 建立详细的检查清单
  - 使用搜索替换确保覆盖

### 视觉密度
- **风险**: 过度紧凑可能影响可读性
- **缓解**: 
  - 保持最小行高 1.5
  - 保留适当的留白
  - 逐步调整，观察效果

### 响应式
- **风险**: 移动端可能需要不同标准
- **缓解**: 
  - 移动端保持原尺寸或更大
  - 使用响应式类名控制
  - 重点优化桌面端体验

## Open Questions
- [ ] 是否需要保留一个"舒适模式"开关让用户选择密度？
- [ ] 移动端是否需要不同的紧凑标准？
- [ ] 表单输入框尺寸是否需要同步调整？
