# 项目列表页界面优化 - 设计文档

## Context

项目列表页需简化首屏、支持容器内滚动、支持项目卡片自定义背景图。背景图首版在提案中为「URL 输入」；现明确改为通过上传组件设置，支持拖拽/点击上传、进度条、成功预览与失败态样式，与现有「只存 coverImageUrl」的 API 兼容（上传成功后得到 URL 再写入 coverImageUrl，或先前端预览、提交表单时再传 URL）。

## Goals / Non-Goals

- **Goals**：移除页面级主副标题、列表容器可滚动、卡片支持自定义背景图；背景图设置入口为上传组件（拖拽+点击、进度、成功预览、失败态）
- **Non-Goals**：多图/相册、裁剪、水印；不在本变更内实现独立文件存储服务（可先前端预览 + 占位 URL，或对接已有上传 API）

## Decisions

### 1. 列表容器滚动

- **Decision**：在项目列表页为 SectionContainer 的 children 外包一层带 `max-height` 与 `overflow-y-auto` 的 div，或为 SectionContainer 增加可选 prop 控制内容区可滚动
- **Rationale**：仅项目页需要滚动时，避免影响其他使用 SectionContainer 的页面

### 2. 背景图数据

- **Decision**：Project 新增可选字段 `coverImageUrl?: string`；上传组件上传成功后将该 URL 写入 coverImageUrl（需上传 API 返回 URL，或先本地/占位 URL，后端仍只存 URL）
- **Rationale**：与现有 API 与数据模型一致，后续可扩展为真实文件托管

---

## 背景图上传组件

以下为背景图上传的四种状态与样式规范（对应提供的三张参考图），实现时按此呈现。

### 组件结构

- **上方主区域**：虚线边框的投放区（dropzone），支持点击选择文件与拖拽放入。
- **下方列表区**：已选/上传中的文件列表，每条可带进度条或操作图标。

### 2.1 初始/空状态（图一）

- **主区域**：深色底（或适配当前主题的浅色底）、浅色虚线边框、圆角矩形。
- **图标**：居中偏上，蓝色「打开盒子/文件夹」图标。
- **主文案**：较大字重 —「Click or drag file to this area to upload」；支持**点击上传**与**拖拽上传**。
- **副文案**：较小、浅灰 —「Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files.»（可做 i18n：支持单文件或批量上传；严禁上传公司数据或其他禁止文件。）

### 2.2 上传中（图二 + 上传过程）

- **主区域**：保持与初始态一致（暂无预览）。
- **下方列表**：当前上传的文件以一条记录展示；**该条下方展示上传进度条**。

### 2.3 成功

- **主区域**：在**上方框内展示预览样式**（背景图预览），不再显示「Click or drag…」占位。
- **下方列表**：该文件可保留一条记录（文件名正常色），右侧可有删除（垃圾桶）图标，便于移除后重选。

### 2.4 失败（图三）

- **下方列表**：失败项的文件名**改为红色**；左侧红色回形针/附件图标；**右侧红色垃圾桶图标**，用于删除该失败记录。

### 行为小结

| 能力     | 说明                                       |
|----------|--------------------------------------------|
| 拖拽上传 | 支持将文件拖入上方虚线框触发上传             |
| 点击上传 | 支持点击上方区域打开文件选择框               |
| 上传过程 | 文件在下方列表展示，其**下方**显示进度条     |
| 成功     | 上方框展示背景图预览；下方列表可保留并支持删除 |
| 失败     | 下方列表该项：文件名红色 + 左侧附件图标 + 右侧垃圾桶图标 |

### 与 URL 方式的关系

- 首版实现上传组件后，上传成功得到 URL 并写入 `coverImageUrl`；若暂无上传 API，可先做「选择文件 → 前端预览 + 本地 Object URL」，提交表单时再以占位或后续对接的上传接口返回 URL 写入。后端仍只存 `coverImageUrl` 字符串。

### 主题

- 参考图为深色背景；当前项目若为浅色主题，保留虚线框/图标/进度条/红字+垃圾桶的布局与逻辑，仅适配浅色背景与对比度。
