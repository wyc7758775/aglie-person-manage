# 需求管理 产品需求文档

- **文档日期**: 20260221
- **主要模块**: 需求管理
- **关联模块**: 项目管理、任务管理、缺陷管理

---

## 背景与目标

### 1.1 背景

当前系统的需求管理模块较为简单，需要升级为完整的需求管理工作流，支持：
- 需求列表的层级展示（父子需求）
- 需求全生命周期管理（创建-编辑-查看）
- 需求与任务、缺陷的关联
- 评论与协作功能
- 操作记录追溯

### 1.2 目标

- 建立统一的需求管理界面，支持表格展示和层级折叠
- 提供右侧滑出式的新增/编辑/查看面板
- 实现需求与任务的双向关联
- 支持评论和附件协作
- 记录完整的需求变更历史

### 1.3 成功指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|----------|
| 需求列表加载 | < 2秒 | 100条数据内加载时间 |
| 父子级展示 | 正常折叠展开 | 子需求可正确显示在父需求下方 |
| 面板交互 | 流畅 | 右侧滑出动画 < 300ms |
| 字段完整性 | 100% | 所有字段可正确保存和展示 |

---

## 核心概念

### 工作项（Work Item）

需求、任务、缺陷本质都是工作项，拥有共同的基类字段：
- 工作项 ID
- 名称/标题
- 状态
- 负责人
- 开始时间、截止时间
- 优先级
- 描述
- 创建时间、更新时间

每种工作项类型拥有额外的专属字段：
- **需求**：可获得积分、子需求、关联任务、关联缺陷
- **任务**：任务类型、所属需求、预估工时
- **缺陷**：严重程度、关联仓库、关联需求

---

## 功能需求

### 3.1 功能列表

| 功能模块 | 功能点 | 优先级 | 说明 |
|----------|--------|--------|------|
| 需求列表 | 表格展示 | P0 | 支持父子级层级展示，参考 Element UI Table |
| 需求列表 | 筛选排序 | P0 | 按状态、优先级、负责人筛选；按时间排序 |
| 需求列表 | 批量操作 | P1 | 批量删除、批量分配负责人 |
| 需求新增 | 右侧滑出面板 | P0 | 从右侧滑出创建表单 |
| 需求编辑 | 右侧滑出面板 | P0 | 与新增共用面板，支持查看模式切换 |
| 需求详情 | 字段展示 | P0 | 展示所有字段及子需求、关联任务 |
| 需求详情 | 评论功能 | P0 | 支持评论和附件 |
| 需求详情 | 操作记录 | P0 | 记录所有变更历史 |
| 子需求 | 层级管理 | P0 | 支持创建子需求，树形展示 |
| 关联任务 | 任务关联 | P0 | 需求可关联多个任务 |

### 3.2 功能详细描述

#### 功能 A：需求列表页

**描述**：提供需求列表页面，以表格形式展示需求，支持父子级层级结构和多种交互。

**页面布局**：
```
┌─────────────────────────────────────────────────────────┐
│  需求管理                                    [新建需求]  │
├─────────────────────────────────────────────────────────┤
│  [筛选: 全部状态 ▼] [全部优先级 ▼] [全部负责人 ▼] [搜索] │
├─────────────────────────────────────────────────────────┤
│  □ | 需求名称    | 工作项ID | 状态  | 负责人 | 截止时间 │
├─────────────────────────────────────────────────────────┤
│  □ | ▶ 用户登录功能 | REQ-001 | 进行中 | 张三   | 02-28 │
│  □ |   手机号登录   | REQ-001-1| 待办 | 李四   | 03-05 │
│  □ |   微信登录     | REQ-001-2| 待办 | 王五   | 03-05 │
│  □ | ▶ 订单管理模块 | REQ-002 | 已完成 | 赵六   | 02-20 │
└─────────────────────────────────────────────────────────┘
```

**用户流程**：
1. 用户进入项目详情页，点击「需求」Tab
2. 系统加载该项目的所有需求列表
3. 默认展开第一级需求，子需求可折叠
4. 用户点击需求名称进入详情面板

**表格列定义**：

| 列名 | 字段 | 宽度 | 说明 |
|------|------|------|------|
| 选择框 | - | 40px | 多选框，支持批量操作 |
| 展开图标 | - | 40px | 有子需求时显示，点击展开/折叠 |
| 需求名称 | name | 自适应 | 点击打开详情面板 |
| 工作项 ID | workItemId | 100px | 系统生成的唯一标识 |
| 状态 | status | 80px | 带颜色标签展示 |
| 负责人 | assignee | 100px | 头像+昵称 |
| 优先级 | priority | 80px | 图标+文字 |
| 截止时间 | deadline | 100px | 日期格式 |
| 可获得积分 | points | 80px | 数字展示 |
| 操作 | - | 120px | 编辑、删除按钮 |

**业务规则**：
- 列表默认按创建时间倒序排列
- 父子需求展示：父需求左侧显示展开/折叠图标，子需求缩进显示
- 筛选条件：状态、优先级、负责人可多选
- 搜索：支持按需求名称、工作项 ID、描述搜索
- 分页：每页默认 20 条，支持 50/100 条切换

**空状态**：
- 无需求时显示：「暂无需求，点击右上角新建需求」
- 搜索无结果时显示：「未找到匹配的需求」

**异常处理**：
- 加载失败 → 显示错误提示，提供重试按钮
- 删除失败 → 显示具体错误信息

---

#### 功能 B：需求新增面板

**描述**：通过右侧滑出面板创建新需求，支持填写所有字段。

**面板布局**：
```
┌────────────────────────────────────────┐
│  新建需求                          [×]  │
├────────────────────────────────────────┤
│  基本信息                               │
│  ─────────────────────────────────────  │
│  需求名称 *                             │
│  [                                    ] │
│                                         │
│  父需求                                 │
│  [请选择父需求（可选）            ▼]   │
│                                         │
│  工作项 ID                              │
│  REQ-003                               │
│  （系统自动生成，不可修改）              │
│                                         │
│  状态 *                                 │
│  [待办 ▼]                              │
│                                         │
│  优先级 *                               │
│  [中 ▼]                                │
│                                         │
│  负责人                                 │
│  [请选择负责人 ▼]                      │
│                                         │
│  时间规划                               │
│  开始时间 [日期选择] 截止时间 [日期选择]│
│                                         │
│  可获得积分                             │
│  [100                              ]   │
│                                         │
│  描述                                   │
│  [支持 Markdown 格式的富文本编辑器    ] │
│                                         │
├────────────────────────────────────────┤
│  [取消]              [创建需求]         │
└────────────────────────────────────────┘
```

**用户流程**：
1. 用户点击「新建需求」按钮
2. 右侧滑出面板，默认显示基本信息表单
3. 用户填写字段（工作项 ID 系统自动生成并自动填充）
4. 点击「创建需求」提交表单
5. 创建成功后：
   - 关闭面板
   - 刷新列表，新需求置顶显示
   - 显示成功提示

**字段定义**：

| 字段 | 必填 | 类型 | 默认值 | 说明 |
|------|------|------|--------|------|
| 需求名称 | 是 | string | - | 2-100 字符 |
| 父需求 | 否 | string | null | 选择已有需求作为父级 |
| 工作项 ID | 否 | string | 系统自动生成 | 格式：REQ-XXX，创建后不可修改 |
| 状态 | 是 | enum | 待办 | 待办/进行中/已完成/已取消/已验收/已关闭 |
| 优先级 | 是 | enum | P2 | P0/P1/P2/P3/P4 |
| 负责人 | 否 | string | null | 项目成员列表选择 |
| 开始时间 | 否 | date | null | 日期选择器 |
| 截止时间 | 否 | date | null | 必须晚于开始时间 |
| 可获得积分 | 否 | number | 0 | 完成需求可获得的积分 |
| 描述 | 否 | markdown | - | 富文本编辑器 |

**业务规则**：
- 工作项 ID 生成规则：系统自动生成，格式 REQ-001、REQ-002...，按创建顺序递增，不可修改
- 选择父需求后，创建的是子需求，工作项 ID 自动添加层级后缀（如 REQ-001-1、REQ-001-1-1 支持无限层级）
- 截止时间不能早于开始时间
- 积分默认为 0，自动计算模式根据优先级自动填充（P0=500，P1=300，P2=200，P3=100，P4=50）

**校验规则**：
- 需求名称：必填，2-100 字符
- 工作项 ID：系统自动生成，唯一，格式 REQ-XXX，不可修改
- 截止时间：不能早于开始时间

---

#### 功能 C：需求编辑/查看面板

**描述**：通过右侧滑出面板查看和编辑需求，支持切换查看/编辑模式。

**面板布局（查看模式）**：
```
┌────────────────────────────────────────┐
│  需求详情                          [×]  │
│  [编辑] [更多操作 ▼]                    │
├────────────────────────────────────────┤
│  基本信息                               │
│  ─────────────────────────────────────  │
│  需求名称：用户登录功能                   │
│  工作项 ID：REQ-001                     │
│  父需求：无                             │
│  状态：进行中                           │
│  优先级：高                             │
│  负责人：张三                           │
│  开始时间：2026-02-15                   │
│  截止时间：2026-02-28                   │
│  可获得积分：200                        │
│  创建时间：2026-02-10 14:30            │
│  更新时间：2026-02-20 09:15            │
│                                         │
│  描述                                   │
│  ─────────────────────────────────────  │
│  [富文本内容展示区域]                    │
│                                         │
│  子需求 (2)                            │
│  ─────────────────────────────────────  │
│  □ 手机号登录    REQ-001-1   待办      │
│  □ 微信登录      REQ-001-2   待办      │
│  [+ 添加子需求]                         │
│                                         │
│  关联任务 (3)                          │
│  ─────────────────────────────────────  │
│  □ 登录接口开发   TASK-001   已完成     │
│  □ 登录页面设计   TASK-002   进行中     │
│  □ 接口联调       TASK-003   待办       │
│  [+ 关联任务]                          │
│                                         │
│  评论 (5)                              │
│  ─────────────────────────────────────  │
│  [评论输入框]                          │
│  [添加附件] [发送]                     │
│                                         │
│  张三  2小时前                          │
│  这个需求需要支持手机号+验证码登录       │
│  📎 登录流程图.png                      │
│                                         │
│  李四  昨天                             │
│  微信登录的 SDK 已经申请好了            │
│                                         │
│  操作记录                              │
│  ─────────────────────────────────────  │
│  2026-02-20 09:15  张三  修改了状态：待办 → 进行中│
│  2026-02-18 16:30  李四  修改了负责人：无 → 张三│
│  2026-02-10 14:30  张三  创建了需求      │
│                                         │
└────────────────────────────────────────┘
```

**用户流程**：
1. 用户在列表点击需求名称
2. 右侧滑出面板，默认进入查看模式
3. 查看模式下显示所有字段和信息区块
4. 点击「编辑」按钮切换到编辑模式
5. 编辑模式下可修改字段，点击「保存」提交

**面板区块**：

| 区块 | 说明 | 可编辑 |
|------|------|--------|
| 基本信息 | 所有字段展示 | 编辑模式下可修改 |
| 描述 | Markdown 渲染展示 | 编辑模式下可修改 |
| 子需求 | 子需求列表，可快速跳转 | 可添加/移除 |
| 关联任务 | 关联的任务列表 | 可添加/移除 |
| 评论 | 评论列表和输入框 | 可添加评论 |
| 操作记录 | 变更历史记录 | 只读 |

**编辑模式字段**：

| 字段 | 可编辑 | 说明 |
|------|--------|------|
| 需求名称 | 是 | 同新增 |
| 工作项 ID | 否 | 系统自动生成，不可修改 |
| 父需求 | 否 | 创建后不可修改层级关系 |
| 状态 | 是 | 下拉选择 |
| 优先级 | 是 | 下拉选择 |
| 负责人 | 是 | 下拉选择 |
| 开始时间 | 是 | 日期选择 |
| 截止时间 | 是 | 日期选择 |
| 可获得积分 | 是 | 数字输入 |
| 描述 | 是 | 富文本编辑 |

**业务规则**：
- 工作项 ID 系统自动生成且不可修改；父需求创建后不可修改，保证层级关系的稳定性
- 状态变更时自动记录到操作历史
- 编辑模式下各字段实时校验
- 自动保存：编辑模式下字段修改后 3 秒自动保存草稿（本地存储）

---

#### 功能 D：子需求管理

**描述**：支持需求的层级结构，父需求可包含多个子需求。

**参考 Worktile 设计**：
- 子需求以卡片形式展示在父需求详情中
- 支持快速创建子需求
- 子需求可独立打开详情面板

**用户流程**：
1. 在需求详情面板查看「子需求」区块
2. 点击「+ 添加子需求」打开子需求创建表单
3. 子需求默认继承父需求的：
   - 负责人（可修改）
   - 优先级（可修改）
   - 截止时间（默认为父需求截止时间）
4. 子需求创建后显示在父需求下方
5. 点击子需求名称可打开独立详情面板

**业务规则**：
- 子需求工作项 ID 格式：父ID-序号（如 REQ-001-1、REQ-001-1-1）
- 支持无限层级结构，列表中以树形展示
- 删除父需求时，所有子需求一并删除（需二次确认）
- 父需求状态自动根据子需求状态聚合：
  - 所有子需求已完成/已验收/已关闭 → 父需求自动标记为已完成
  - 有子需求进行中 → 父需求自动标记为进行中
  - 所有子需求待办 → 父需求自动标记为待办

---

#### 功能 E：任务关联

**描述**：需求可与多个任务关联，建立需求与执行的双向关系。

**参考 Worktile 设计**：
- 在需求详情中展示关联的任务列表
- 任务卡片显示基本信息和状态
- 支持添加现有任务或创建新任务并关联

**用户流程**：
1. 在需求详情面板查看「关联任务」区块
2. 点击「+ 关联任务」打开任务选择器
3. 选择已有任务或创建新任务
4. 关联后任务显示在列表中
5. 点击任务名称可跳转至任务详情

**关联任务展示**：

| 字段 | 说明 |
|------|------|
| 任务名称 | 可点击跳转 |
| 工作项 ID | 如 TASK-001 |
| 状态 | 待办/进行中/已完成 |
| 负责人 | 头像+昵称 |
| 操作 | 解除关联按钮 |

**业务规则**：
- 一个需求可关联多个任务
- 一个任务只能关联一个需求（或无所属需求）
- 任务状态变更不影响需求状态
- 解除关联时仅解除关系，不删除任务

---

#### 功能 F：评论与附件

**描述**：支持需求的评论讨论和附件上传，便于团队协作。

**用户流程**：
1. 在需求详情面板底部查看「评论」区块
2. 在输入框输入评论内容
3. 点击「添加附件」上传文件（支持拖拽）
4. 点击「发送」提交评论
5. 评论按时间倒序展示

**评论展示**：

| 元素 | 说明 |
|------|------|
| 评论者头像 | 圆形头像 |
| 评论者昵称 | 昵称+时间 |
| 评论内容 | 纯文本，支持换行 |
| 附件列表 | 图片可预览，文件可下载 |
| 回复按钮 | 点击回复该评论 |

**附件功能**：

| 属性 | 限制 |
|------|------|
| 支持格式 | Markdown(.md)、Word(.doc/.docx)、Excel(.xls/.xlsx)、PDF(.pdf) |
| 单文件大小 | 最大 20MB |
| 单条评论附件 | 最多 5 个 |
| 存储方式 | 对象存储（如 OSS/S3） |

**业务规则**：
- 评论内容不能为空（至少 1 个字符）
- 评论按时间倒序排列，最新评论在最上方
- 附件上传时显示进度条
- 图片附件支持点击预览
- 评论支持删除（仅自己发表的）
- 暂不支持 @ 提醒功能

---

#### 功能 G：操作记录

**描述**：记录需求的所有变更历史，便于追溯和审计。

**记录内容**：

| 操作类型 | 记录内容 |
|----------|----------|
| 创建 | 创建者、创建时间 |
| 编辑 | 修改者、修改时间、字段名、旧值、新值 |
| 状态变更 | 变更者、变更时间、旧状态、新状态 |
| 分配变更 | 变更者、变更时间、旧负责人、新负责人 |

**展示格式**：
```
2026-02-20 09:15  张三  修改了状态：待办 → 进行中
2026-02-18 16:30  李四  修改了负责人：无 → 张三
2026-02-15 10:00  王五  关联了任务：TASK-001
2026-02-10 14:30  张三  创建了需求
```

**业务规则**：
- 操作记录不可删除、不可修改
- 记录保存 1 年（可配置）
- 支持按操作类型筛选
- 支持导出操作记录

---

### 3.3 数据模型

#### Requirement（需求）

```typescript
interface Requirement {
  // 基础字段（工作项通用）
  id: string;                    // 数据库唯一ID
  workItemId: string;            // 工作项ID，如 REQ-001
  name: string;                  // 需求名称
  status: RequirementStatus;     // 状态
  assignee: string | null;       // 负责人ID
  startDate: string | null;      // 开始时间（ISO日期）
  deadline: string | null;       // 截止时间（ISO日期）
  priority: Priority;            // 优先级
  description: string;           // 描述（Markdown）
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
  
  // 需求特有字段
  projectId: string;             // 所属项目ID
  parentId: string | null;       // 父需求ID
  points: number;                // 可获得积分
  
  // 关联关系
  subRequirements: string[];     // 子需求ID列表
  relatedTasks: string[];        // 关联任务ID列表
  relatedDefects: string[];      // 关联缺陷ID列表
}

enum RequirementStatus {
  TODO = 'todo',               // 待办
  IN_PROGRESS = 'in_progress', // 进行中
  DONE = 'done',               // 已完成
  CANCELLED = 'cancelled',     // 已取消
  ACCEPTED = 'accepted',       // 已验收
  CLOSED = 'closed'            // 已关闭
}

enum Priority {
  P0 = 'p0',   // P0-最高优先级
  P1 = 'p1',   // P1-高优先级
  P2 = 'p2',   // P2-中优先级（默认）
  P3 = 'p3',   // P3-低优先级
  P4 = 'p4'    // P4-最低优先级
}
```

#### Comment（评论）

```typescript
interface Comment {
  id: string;
  workItemId: string;        // 关联的工作项ID
  workItemType: 'requirement' | 'task' | 'defect';
  content: string;           // 评论内容
  authorId: string;          // 评论者ID
  attachments: Attachment[]; // 附件列表
  createdAt: string;
  updatedAt: string;
}

interface Attachment {
  id: string;
  name: string;              // 文件名
  url: string;               // 文件URL
  size: number;              // 文件大小（字节）
  type: string;              // MIME类型
}
```

#### OperationLog（操作记录）

```typescript
interface OperationLog {
  id: string;
  workItemId: string;        // 关联的工作项ID
  workItemType: 'requirement' | 'task' | 'defect';
  operation: OperationType;  // 操作类型
  operatorId: string;        // 操作者ID
  fieldName?: string;        // 变更字段名（字段修改时）
  oldValue?: any;            // 旧值
  newValue?: any;            // 新值
  createdAt: string;
}

enum OperationType {
  CREATE = 'create',           // 创建
  UPDATE = 'update',           // 字段修改
  STATUS_CHANGE = 'status_change',  // 状态变更
  ASSIGN_CHANGE = 'assign_change',  // 负责人变更
  LINK = 'link',               // 关联
  UNLINK = 'unlink',           // 解除关联
  COMMENT = 'comment'          // 评论
}
```

---

## 交互设计

### 4.1 需求列表交互

**展开/折叠**：
- 点击父需求左侧的 ▶/▼ 图标展开或折叠子需求
- 默认展开所有父需求的第一级子需求
- 记忆用户的折叠状态（本地存储）

**排序**：
- 点击列头可进行排序
- 支持多列组合排序
- 默认按创建时间倒序

**筛选**：
- 顶部筛选栏支持多条件组合
- 筛选条件实时生效
- 显示当前筛选结果数量

**快捷操作**：
- 悬停行显示快捷操作按钮（编辑、删除）
- 右键菜单：编辑、删除、复制需求链接

### 4.2 右侧面板交互

**打开方式**：
- 点击需求名称 → 打开查看模式
- 点击「新建需求」→ 打开新增模式
- 点击行内「编辑」→ 打开编辑模式

**面板行为**：
- 从右侧滑出，宽度 600px
- 点击遮罩层或按 ESC 关闭面板
- 有未保存修改时关闭需确认

**模式切换**：
- 查看模式 → 编辑模式：点击「编辑」按钮
- 编辑模式 → 查看模式：点击「取消」或保存成功

### 4.3 表单交互

**自动保存**：
- 编辑模式下，字段修改后 3 秒自动保存草稿到本地存储
- 下次打开面板时提示恢复草稿

**实时校验**：
- 字段失焦时进行校验
- 校验失败显示错误提示
- 提交前进行全表单校验

**积分自动计算**：
- 勾选「自动计算」后，根据优先级自动填充积分值
- 取消勾选可手动输入任意积分值

---

## API 设计

### 5.1 需求列表

```
GET /api/projects/{projectId}/requirements
Query Parameters:
  - status: string[] (可选) 状态筛选
  - priority: string[] (可选) 优先级筛选
  - assignee: string[] (可选) 负责人筛选
  - keyword: string (可选) 搜索关键词
  - page: number (默认 1) 页码
  - pageSize: number (默认 20) 每页条数
  - sortBy: string (默认 createdAt) 排序字段
  - sortOrder: 'asc' | 'desc' (默认 desc) 排序方向

Response:
{
  success: true,
  data: {
    list: Requirement[],
    pagination: {
      total: number,
      page: number,
      pageSize: number,
      totalPages: number
    }
  }
}
```

### 5.2 创建需求

```
POST /api/projects/{projectId}/requirements

Body:
{
  name: string,
  parentId: string | null,
  status: RequirementStatus,
  priority: Priority,
  assignee: string | null,
  startDate: string | null,
  deadline: string | null,
  points: number,
  description: string
}

Response:
{
  success: true,
  data: Requirement
}
```

### 5.3 获取需求详情

```
GET /api/requirements/{requirementId}

Response:
{
  success: true,
  data: {
    requirement: Requirement,
    subRequirements: Requirement[],
    relatedTasks: Task[],
    comments: Comment[],
    operationLogs: OperationLog[]
  }
}
```

### 5.4 更新需求

```
PUT /api/requirements/{requirementId}

Body: (部分更新，只传需要修改的字段)
{
  name?: string,
  status?: RequirementStatus,
  priority?: Priority,
  assignee?: string | null,
  startDate?: string | null,
  deadline?: string | null,
  points?: number,
  description?: string
}

Response:
{
  success: true,
  data: Requirement
}
```

### 5.5 删除需求

```
DELETE /api/requirements/{requirementId}

Response:
{
  success: true,
  message: '需求已删除'
}
```

### 5.6 评论相关

```
// 获取评论列表
GET /api/requirements/{requirementId}/comments

// 添加评论
POST /api/requirements/{requirementId}/comments
Body: {
  content: string,
  attachments: Attachment[]
}

// 删除评论
DELETE /api/comments/{commentId}
```

### 5.7 操作记录

```
GET /api/requirements/{requirementId}/logs

Response:
{
  success: true,
  data: OperationLog[]
}
```

---

## 验收标准

### 6.1 功能验收

| 编号 | 验收项 | 验收方式 |
|------|--------|----------|
| AC-01 | 需求列表以表格形式展示 | 查看页面 |
| AC-02 | 父子需求层级关系正确显示 | 创建父子需求并查看列表 |
| AC-03 | 点击需求名称打开右侧面板 | 点击测试 |
| AC-04 | 右侧面板支持查看/编辑模式切换 | 测试模式切换 |
| AC-05 | 可创建子需求 | 创建子需求并验证层级关系 |
| AC-06 | 可关联任务 | 关联任务并验证双向关系 |
| AC-07 | 可发表评论和上传附件 | 测试评论功能 |
| AC-08 | 操作记录记录所有变更 | 修改字段并查看操作记录 |

### 6.2 性能验收

| 编号 | 验收项 | 验收标准 |
|------|--------|----------|
| AC-09 | 列表加载时间 | 100条数据 < 2秒 |
| AC-10 | 面板打开动画 | < 300ms |
| AC-11 | 筛选响应时间 | < 500ms |

### 6.3 数据验收

| 编号 | 验收项 | 验收标准 |
|------|--------|----------|
| AC-12 | 所有字段正确保存 | 创建需求后验证所有字段 |
| AC-13 | 工作项 ID 唯一性 | 重复ID被拒绝 |
| AC-14 | 操作记录完整性 | 所有操作均有记录 |

---

## 附录

### 状态颜色定义

| 状态 | 颜色 | Tailwind 类 |
|------|------|-------------|
| 待办 | 灰色 | bg-gray-100 text-gray-700 |
| 进行中 | 蓝色 | bg-blue-100 text-blue-700 |
| 已完成 | 绿色 | bg-green-100 text-green-700 |
| 已取消 | 红色 | bg-red-100 text-red-700 |
| 已验收 | 紫色 | bg-purple-100 text-purple-700 |
| 已关闭 | 深灰色 | bg-slate-100 text-slate-700 |

### 优先级颜色定义

| 优先级 | 颜色 | 图标 |
|--------|------|------|
| P0 | 红色 | 🔴 |
| P1 | 橙色 | 🟠 |
| P2 | 黄色 | 🟡 |
| P3 | 蓝色 | 🔵 |
| P4 | 灰色 | ⚪ |

### 积分自动计算规则

| 优先级 | 默认积分 |
|--------|----------|
| P0 | 500 |
| P1 | 300 |
| P2 | 200 |
| P3 | 100 |
| P4 | 50 |
